(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42b113a8"],{"2ec5":function(t,e,o){},ab4b:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),o("el-breadcrumb-item",[t._v("零售商管理")]),o("el-breadcrumb-item",[t._v("零售商交易管理")])],1),o("el-card",{staticClass:"box-card"},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:6}},[o("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"请输入交易信息"},on:{clear:t.getDataList},model:{value:t.queryInfo.query,callback:function(e){t.$set(t.queryInfo,"query",e)},expression:"queryInfo.query"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getDataList},slot:"append"})],1)],1),o("el-col",{attrs:{span:2}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("新增零售交易数据")])],1)],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[o("el-table-column",{attrs:{type:"index",label:"零售订单号"}}),o("el-table-column",{attrs:{prop:"qymc",label:"零售商",width:"180"}}),o("el-table-column",{attrs:{prop:"name",label:"生产企业"}}),o("el-table-column",{attrs:{prop:"money",label:"零售产品"}}),o("el-table-column",{attrs:{prop:"product",label:"交易数量"}}),o("el-table-column",{attrs:{prop:"number",label:"交易金额"}}),o("el-table-column",{attrs:{prop:"number",label:"购买方"}}),o("el-table-column",{attrs:{prop:"number",label:"买家联系方式"}}),o("el-table-column",{attrs:{prop:"number",label:"时间"}}),o("el-table-column",{attrs:{prop:"time",label:"交易时间"}}),o("el-table-column",{attrs:{label:"操作",width:"270px"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(o){return t.editInfo(e.row.id)}}})],1),o("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top-end"}},[o("el-button",{attrs:{type:"warning",icon:"el-icon-delete"},on:{click:function(o){return t.delInfo(e.row.id)}}})],1)]}}])})],1),o("el-pagination",{attrs:{background:"",layout:"prev, pager, next,total",total:t.total,"page-size":t.queryInfo.pageSize},on:{"current-change":t.handleCurrentChange}}),o("el-dialog",{attrs:{title:"新增零售数据",visible:t.addDialogVisible,width:"30%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[o("el-form",{ref:"addFormRef",attrs:{size:"medium",inline:!0,model:t.addFormInfo,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"生产企业名称",prop:"chandi"}},[o("el-select",{attrs:{placeholder:"请选择生产企业"},model:{value:t.addFormInfo.chandi,callback:function(e){t.$set(t.addFormInfo,"chandi",e)},expression:"addFormInfo.chandi"}},t._l(t.selectCompany,(function(t){return o("el-option",{key:t.qydm,attrs:{label:t.qymc,value:t.qymc}})})),1)],1),o("el-form-item",{attrs:{label:"产品名称",prop:"cpbh"}},[o("el-select",{attrs:{placeholder:"请选择产品"},model:{value:t.addFormInfo.cpbh,callback:function(e){t.$set(t.addFormInfo,"cpbh",e)},expression:"addFormInfo.cpbh"}},t._l(t.selectProduct,(function(t){return o("el-option",{key:t.bh,attrs:{label:t.cpmc,value:t.bh}})})),1)],1),o("el-form-item",{attrs:{label:"购买数量",prop:"name"}},[o("el-input",{model:{value:t.addFormInfo.name,callback:function(e){t.$set(t.addFormInfo,"name",e)},expression:"addFormInfo.name"}})],1),o("el-form-item",{attrs:{label:"交易金额",prop:"money"}},[o("el-input",{model:{value:t.addFormInfo.money,callback:function(e){t.$set(t.addFormInfo,"money",e)},expression:"addFormInfo.money"}})],1),o("el-form-item",{attrs:{label:"购买方",prop:"product"}},[o("el-input",{model:{value:t.addFormInfo.product,callback:function(e){t.$set(t.addFormInfo,"product",e)},expression:"addFormInfo.product"}})],1),o("el-form-item",{attrs:{label:"买家联系方式",prop:"number"}},[o("el-input",{model:{value:t.addFormInfo.number,callback:function(e){t.$set(t.addFormInfo,"number",e)},expression:"addFormInfo.number"}})],1),o("el-form-item",{attrs:{label:"交易日期",prop:"time"}},[o("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.addFormInfo.time,callback:function(e){t.$set(t.addFormInfo,"time",e)},expression:"addFormInfo.time"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.addFormSubmit}},[t._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"编辑物流信息",visible:t.editDialogVisible,width:"40%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[o("el-form",{ref:"editFormRef",attrs:{size:"medium",inline:!0,model:t.editFormInfo,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"零售商名称",prop:"name"}},[o("el-input",{model:{value:t.editFormInfo.name,callback:function(e){t.$set(t.editFormInfo,"name",e)},expression:"editFormInfo.name"}})],1),o("el-form-item",{attrs:{label:"生产企业名称",prop:"money"}},[o("el-input",{model:{value:t.editFormInfo.money,callback:function(e){t.$set(t.editFormInfo,"money",e)},expression:"editFormInfo.money"}})],1),o("el-form-item",{attrs:{label:"交易产品",prop:"product"}},[o("el-input",{model:{value:t.editFormInfo.product,callback:function(e){t.$set(t.editFormInfo,"product",e)},expression:"editFormInfo.product"}})],1),o("el-form-item",{attrs:{label:"交易数量",prop:"number"}},[o("el-input",{model:{value:t.editFormInfo.number,callback:function(e){t.$set(t.editFormInfo,"number",e)},expression:"editFormInfo.number"}})],1),o("el-form-item",{attrs:{label:"总价",prop:"number"}},[o("el-input",{model:{value:t.editFormInfo.number,callback:function(e){t.$set(t.editFormInfo,"number",e)},expression:"editFormInfo.number"}})],1),o("el-form-item",{attrs:{label:"购买方",prop:"number"}},[o("el-input",{model:{value:t.editFormInfo.number,callback:function(e){t.$set(t.editFormInfo,"number",e)},expression:"editFormInfo.number"}})],1),o("el-form-item",{attrs:{label:"买家联系方式",prop:"number"}},[o("el-input",{model:{value:t.editFormInfo.number,callback:function(e){t.$set(t.editFormInfo,"number",e)},expression:"editFormInfo.number"}})],1),o("el-form-item",{attrs:{label:"交易图片名称",prop:"picture"}},[o("el-input",{attrs:{disabled:""},model:{value:t.editFormInfo.picture,callback:function(e){t.$set(t.editFormInfo,"picture",e)},expression:"editFormInfo.picture"}})],1),o("el-form-item",{attrs:{label:"交易图片上传"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"image",action:t.uploadURL,"on-success":t.successEvent,"list-type":"picture"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png格式的图片，且图片大小不能超过1MB")])],1)],1),o("el-form-item",{attrs:{label:"交易日期",prop:"time"}},[o("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.editFormInfo.time,callback:function(e){t.$set(t.editFormInfo,"time",e)},expression:"editFormInfo.time"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.editFormSubmit}},[t._v("确 定")])],1)],1)],1)],1)},a=[],r=o("1da1"),i=(o("b0c0"),o("96cf"),{data:function(){return{tokenStr:"",queryInfo:{token:"",query:"",page:1,pageSize:5},total:0,tableData:[],addDialogVisible:!1,editDialogVisible:!1,printCargoDialogVisible:!1,addFormInfo:{},uploadURL:"",carGoUploadURL:"",editFormInfo:{name:"",money:"",product:"",number:"",time:"",picture:""},cpInfoList:[],cpmcList:[],selectCompany:[],selectPch:[]}},created:function(){this.tokenStr=window.sessionStorage.getItem("token"),this.getDataList(),this.getCompany()},methods:{getDataList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.queryInfo.token=t.tokenStr,e.next=3,t.$http.post("TransactionList",t.queryInfo);case 3:o=e.sent,n=o.data,console.log(n.data.result),t.tableData=n.data.result,t.total=n.data.total;case 8:case"end":return e.stop()}}),e)})))()},getCompany:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("selectcompany",t.queryInfo);case 2:o=e.sent,n=o.data,console.log(n),t.selectCompany=n.data;case 6:case"end":return e.stop()}}),e)})))()},handleCurrentChange:function(t){this.queryInfo.page=t,this.getDataList()},addFormSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.addFormInfo.token=t.tokenStr,e.next=3,t.$http.post("AddTransactionInfo",t.addFormInfo);case 3:t.getDataList(),t.addDialogVisible=!1,t.$refs.addFormRef.resetFields();case 6:case"end":return e.stop()}}),e)})))()},successEvent:function(t,e,o){this.addFormInfo.picture=t.data.saveName,this.editFormInfo.picture=t.data.saveName},carGoSuccessEvent:function(t,e,o){this.addFormInfo.cargo_pic=e.name,this.editFormInfo.cargo_pic=e.name,console.log(t,e.name)},setUploadURL:function(){this.tokenStr=window.sessionStorage.getItem("token"),this.uploadURL="http://ahteaapi.wtycms.cn/Transactionupload?token="+this.tokenStr},editInfo:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,e.$http.post("EditTransactionInfo",{token:e.tokenStr,id:t});case 2:n=o.sent,a=n.data,console.log(a.data),e.editFormInfo.id=a.data.id,e.editFormInfo.name=a.data.name,e.editFormInfo.money=a.data.money,e.editFormInfo.product=a.data.product,e.editFormInfo.number=a.data.number,e.editFormInfo.time=a.data.time,e.editFormInfo.picture=a.data.picture,e.editDialogVisible=!0;case 13:case"end":return o.stop()}}),o)})))()},editFormSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("DoEditTransactionInfo",t.editFormInfo);case 2:t.editDialogVisible=!1,t.$message.success("编辑成功"),t.getDataList();case 5:case"end":return e.stop()}}),e)})))()},delInfo:function(t){var e=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.post("DelTransactionInfo",{token:e.tokenStr,id:t}),e.$message({type:"success",message:"删除成功!"}),e.getDataList()})).catch((function(){e.$message({type:"info",message:"已取消删除"})})),this.getDataList()},getPrintData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("ProductionInfo",t.queryInfo);case 2:for(o=e.sent,n=o.data,console.log(n),t.cpInfoList=n.data.result,a=0;a<t.cpInfoList.length;a++)-1==t.cpmcList.indexOf(t.cpInfoList[a].cpmc)&&t.cpmcList.push(t.cpInfoList[a].cpmc);console.log(t.cpInfoList);case 8:case"end":return e.stop()}}),e)})))()},getAddPch:function(){this.pchList=[];for(var t=0;t<this.cpInfoList.length;t++)this.addFormInfo.cpmc==this.cpInfoList[t].cpmc&&this.pchList.push(this.cpInfoList[t].pch)},getPch:function(){this.pchList=[];for(var t=0;t<this.cpInfoList.length;t++)this.editFormInfo.cpmc==this.cpInfoList[t].cpmc&&this.pchList.push(this.cpInfoList[t].pch)},printCargoBill:function(t){console.log(t),this.printCargoDialogVisible=!0}}}),l=i,s=(o("de2d"),o("2877")),c=Object(s["a"])(l,n,a,!1,null,"5b59155a",null);e["default"]=c.exports},de2d:function(t,e,o){"use strict";o("2ec5")}}]);
//# sourceMappingURL=chunk-42b113a8.464ea130.js.map