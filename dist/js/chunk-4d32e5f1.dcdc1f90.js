(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d32e5f1"],{"77f3":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),o("el-breadcrumb-item",[e._v("检测信息上传")]),o("el-breadcrumb-item",[e._v("检测信息手动上传")])],1),o("el-card",{staticClass:"box-card"},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:6}},[o("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"请输入样本名称"},on:{clear:e.getDataList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getDataList},slot:"append"})],1)],1),o("el-col",{attrs:{span:2}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("新增")])],1)],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{label:"编号",type:"index"}}),o("el-table-column",{attrs:{prop:"qymc",label:"企业名称",width:"180"}}),o("el-table-column",{attrs:{prop:"pch",label:"批次号"}}),o("el-table-column",{attrs:{prop:"ybmc",label:"样本名称"}}),o("el-table-column",{attrs:{prop:"jcnr",label:"检测内容"}}),o("el-table-column",{attrs:{prop:"jcz",label:"检测值"}}),o("el-table-column",{attrs:{prop:"jcjg",label:"检测结果"}}),o("el-table-column",{attrs:{prop:"jcdd",label:"检测地点"}}),o("el-table-column",{attrs:{prop:"jcr",label:"检测人"}}),o("el-table-column",{attrs:{prop:"rq",label:"检测日期"}}),o("el-table-column",{attrs:{label:"检测报告"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("img",{attrs:{src:e.row.pic,alt:"暂无图片",width:"100px",height:"100px"}})]}}])}),o("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(o){return e.editInfo(t.row.bh)}}})],1),o("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top-end"}},[o("el-button",{attrs:{type:"warning",icon:"el-icon-delete"},on:{click:function(o){return e.delInfo(t.row.bh)}}})],1)]}}])})],1),o("el-pagination",{attrs:{background:"",layout:"prev, pager, next,total",total:e.total,"page-size":e.queryInfo.pageSize},on:{"current-change":e.handleCurrentChange}}),o("el-dialog",{attrs:{title:"添加信息",visible:e.addDialogVisible,width:"40%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addFormClosed}},[o("el-form",{ref:"addFormRef",attrs:{rules:e.FormRules,model:e.addFormInfo,"label-width":"80px",inline:!0}},[o("el-form-item",{attrs:{label:"样本名称",prop:"ybmc"}},[o("el-select",{attrs:{placeholder:"请选择样本名称"},on:{change:e.selectProductChange},model:{value:e.addFormInfo.cpbh,callback:function(t){e.$set(e.addFormInfo,"cpbh",t)},expression:"addFormInfo.cpbh"}},e._l(e.selectProduct,(function(e){return o("el-option",{key:e.bh,attrs:{label:e.cpmc,value:e.bh}})})),1)],1),o("el-form-item",{attrs:{label:"批次号",prop:"pch"}},[o("el-select",{attrs:{placeholder:"请选择样本名称"},model:{value:e.addFormInfo.pch,callback:function(t){e.$set(e.addFormInfo,"pch",t)},expression:"addFormInfo.pch"}},e._l(e.selectPch,(function(e){return o("el-option",{key:e.pch,attrs:{label:e.pch,value:e.pch}})})),1)],1),o("el-form-item",{attrs:{label:"检测内容",prop:"jcnr"}},[o("el-input",{model:{value:e.addFormInfo.jcnr,callback:function(t){e.$set(e.addFormInfo,"jcnr",t)},expression:"addFormInfo.jcnr"}})],1),o("el-form-item",{attrs:{label:"检测值",prop:"jcz"}},[o("el-input",{model:{value:e.addFormInfo.jcz,callback:function(t){e.$set(e.addFormInfo,"jcz",t)},expression:"addFormInfo.jcz"}})],1),o("el-form-item",{attrs:{label:"检测结果",prop:"jcjg"}},[o("el-input",{model:{value:e.addFormInfo.jcjg,callback:function(t){e.$set(e.addFormInfo,"jcjg",t)},expression:"addFormInfo.jcjg"}})],1),o("el-form-item",{attrs:{label:"检测地点",prop:"jcdd"}},[o("el-input",{model:{value:e.addFormInfo.jcdd,callback:function(t){e.$set(e.addFormInfo,"jcdd",t)},expression:"addFormInfo.jcdd"}})],1),o("el-form-item",{attrs:{label:"检测人",prop:"jcr"}},[o("el-input",{model:{value:e.addFormInfo.jcr,callback:function(t){e.$set(e.addFormInfo,"jcr",t)},expression:"addFormInfo.jcr"}})],1),o("el-form-item",{attrs:{label:"检测日期",prop:"rq"}},[o("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.addFormInfo.rq,callback:function(t){e.$set(e.addFormInfo,"rq",t)},expression:"addFormInfo.rq"}})],1),o("el-form-item",{attrs:{label:"图片名称",prop:"pic"}},[o("el-input",{attrs:{disabled:""},model:{value:e.addFormInfo.pic,callback:function(t){e.$set(e.addFormInfo,"pic",t)},expression:"addFormInfo.pic"}})],1),o("el-form-item",{attrs:{label:"检测报告上传"}},[o("el-upload",{ref:"upload",attrs:{name:"image",action:e.uploadURL,"on-success":e.successEvent,"list-type":"picture"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png格式的图片，且图片大小不能超过1MB ")])],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.addFormSubmit}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"编辑信息",visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.addFormClosed}},[o("el-form",{ref:"editFormRef",attrs:{model:e.editFormInfo,"label-width":"80px",inline:!0}},[o("el-form-item",{attrs:{label:"样本名称",prop:"ybmc"}},[o("el-select",{attrs:{placeholder:"请选择样本名称"},on:{change:e.selectProductChange},model:{value:e.editFormInfo.cpbh,callback:function(t){e.$set(e.editFormInfo,"cpbh",t)},expression:"editFormInfo.cpbh"}},e._l(e.selectProduct,(function(e){return o("el-option",{key:e.bh,attrs:{label:e.cpmc,value:e.bh}})})),1)],1),o("el-form-item",{attrs:{label:"批次号",prop:"pch"}},[o("el-select",{attrs:{placeholder:"请选择样本名称"},model:{value:e.editFormInfo.pch,callback:function(t){e.$set(e.editFormInfo,"pch",t)},expression:"editFormInfo.pch"}},e._l(e.selectPch,(function(e){return o("el-option",{key:e.pch,attrs:{label:e.pch,value:e.pch}})})),1)],1),o("el-form-item",{attrs:{label:"检测内容",prop:"jcnr"}},[o("el-input",{model:{value:e.editFormInfo.jcnr,callback:function(t){e.$set(e.editFormInfo,"jcnr",t)},expression:"editFormInfo.jcnr"}})],1),o("el-form-item",{attrs:{label:"检测值",prop:"jcz"}},[o("el-input",{model:{value:e.editFormInfo.jcz,callback:function(t){e.$set(e.editFormInfo,"jcz",t)},expression:"editFormInfo.jcz"}})],1),o("el-form-item",{attrs:{label:"检测结果",prop:"jcjg"}},[o("el-input",{model:{value:e.editFormInfo.jcjg,callback:function(t){e.$set(e.editFormInfo,"jcjg",t)},expression:"editFormInfo.jcjg"}})],1),o("el-form-item",{attrs:{label:"检测地点",prop:"jcdd"}},[o("el-input",{model:{value:e.editFormInfo.jcdd,callback:function(t){e.$set(e.editFormInfo,"jcdd",t)},expression:"editFormInfo.jcdd"}})],1),o("el-form-item",{attrs:{label:"检测人",prop:"jcr"}},[o("el-input",{model:{value:e.editFormInfo.jcr,callback:function(t){e.$set(e.editFormInfo,"jcr",t)},expression:"editFormInfo.jcr"}})],1),o("el-form-item",{attrs:{label:"检测日期",prop:"rq"}},[o("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.editFormInfo.rq,callback:function(t){e.$set(e.editFormInfo,"rq",t)},expression:"editFormInfo.rq"}})],1),o("el-form-item",{attrs:{label:"图片名称",prop:"pic"}},[o("el-input",{attrs:{disabled:""},model:{value:e.editFormInfo.pic,callback:function(t){e.$set(e.editFormInfo,"pic",t)},expression:"editFormInfo.pic"}})],1),o("el-form-item",{attrs:{label:"检测报告上传"}},[o("el-upload",{ref:"upload",attrs:{name:"image",action:e.uploadURL,"on-success":e.successEvent,"list-type":"picture"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png格式的图片，且图片大小不能超过1MB ")])],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.editFormSubmit}},[e._v("确 定")])],1)],1)],1)],1)},a=[],n=o("1da1"),l=(o("d81d"),o("b0c0"),o("96cf"),{data:function(){return{tokenStr:"",queryInfo:{token:"",query:"",page:1,pageSize:5},total:0,tableData:[],addDialogVisible:!1,editDialogVisible:!1,addFormInfo:{token:"",ybmc:"",cpbh:"",pch:"",jcnr:"",jcjg:"",jcdd:"",jcr:"",rq:"",pic:""},editFormInfo:{},selectProduct:[],selectPch:[],FormRules:{},uploadURL:""}},created:function(){this.tokenStr=window.sessionStorage.getItem("token"),this.getDataList(),this.setUploadURL()},methods:{getDataList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var o,r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.queryInfo.token=e.tokenStr,t.next=3,e.$http.post("DetectionInfo",e.queryInfo);case 3:return o=t.sent,r=o.data,console.log(r),e.total=r.data.total,e.tableData=r.data.result,t.next=10,e.$http.post("SelectProduction",{token:e.tokenStr});case 10:a=t.sent,n=a.data,e.selectProduct=n.data,console.log(e.selectProduct);case 14:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.queryInfo.page=e,this.getDataList()},selectProductChange:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var r,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.selectProduct.map((function(o){o.cpbh==e&&(t.addFormInfo.ybmc=o.cpmc,console.log(t.addFormInfo.ybmc))})),o.next=3,t.$http.post("SelectPch",{token:t.tokenStr,cpbh:e});case 3:r=o.sent,a=r.data,t.selectPch=a.data;case 6:case"end":return o.stop()}}),o)})))()},addFormClosed:function(){},successEvent:function(e,t,o){this.addFormInfo.pic=t.name,this.editFormInfo.pic=t.name,console.log(e,t.name)},setUploadURL:function(){this.uploadURL="http://ahteaapi.wtycms.cn/Detectionpictureupload?token="+this.tokenStr,console.log(this.uploadURL)},addFormSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.addFormInfo.token=e.tokenStr,t.next=3,e.$http.post("AddDetectionInfo",e.addFormInfo);case 3:o=t.sent,r=o.data,0==r.code?(e.$message({message:"添加检测信息成功！",type:"success"}),e.addDialogVisible=!1,e.getDataList()):e.$message({message:"添加检测信息失败！",type:"error"});case 6:case"end":return t.stop()}}),t)})))()},editInfo:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var r,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$http.post("EditDetectionInfo",{token:t.tokenStr,bh:e});case 2:r=o.sent,a=r.data,t.editFormInfo=a.data,console.log(a.data),t.editDialogVisible=!0;case 7:case"end":return o.stop()}}),o)})))()},editFormSubmit:function(){this.editFormInfo.token=this.tokenStr,this.$http.post("DoEditDetectionInfo",this.editFormInfo),this.editDialogVisible=!1,this.getDataList()},delInfo:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var r,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=o.sent,"confirm"==r){o.next=5;break}return o.abrupt("return",t.$message.info("取消删除"));case 5:return o.next=7,t.$http.post("DelDetectionInfo",{token:t.tokenStr,bh:e});case 7:if(a=o.sent,200===a.status){o.next=10;break}return o.abrupt("return",t.$message.error("删除失败"));case 10:t.$message.success("删除成功"),t.getDataList(),console.log(a);case 13:case"end":return o.stop()}}),o)})))()}}}),c=l,i=(o("ea17"),o("2877")),s=Object(i["a"])(c,r,a,!1,null,"8507392c",null);t["default"]=s.exports},e1f1:function(e,t,o){},ea17:function(e,t,o){"use strict";o("e1f1")}}]);
//# sourceMappingURL=chunk-4d32e5f1.dcdc1f90.js.map