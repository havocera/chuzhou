(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56f0b5fb"],{"0af9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[a("el-table",{staticStyle:{width:"100%","margin-top":"50px"},attrs:{data:t.tableData,height:"550",border:""}},[a("el-table-column",{attrs:{prop:"cpmc",label:"产品名称"}}),a("el-table-column",{attrs:{prop:"chandi",label:"产地",width:"180"}}),a("el-table-column",{attrs:{prop:"pch",label:"批次号"}}),a("el-table-column",{attrs:{prop:"sym",label:"溯源码"}}),a("el-table-column",{attrs:{prop:"smcs",label:"扫码次数"}}),a("el-table-column",{attrs:{prop:"date",label:"溯源码生成时间",width:"180"}})],1),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{"current-page":t.queryInfo.page,background:"",layout:"prev, pager, next, total",total:t.total,"page-size":t.queryInfo.pageSize},on:{"current-change":t.handleCurrentChange}}),a("el-dialog",{attrs:{title:"二维码打印界面",visible:t.printDialogVisible,width:"30%","destroy-on-close":!0,center:""},on:{"update:visible":function(e){t.printDialogVisible=e}}},[a("div",{staticClass:"symContainer",attrs:{id:"printArea"}},[a("div",{staticClass:"sym-tit"},[t._v(" 物联网+区块链食品安全追溯系统 ")]),a("ul",{staticClass:"symInfo"},[a("li",[t._v("产品名称："+t._s(t.symMsg.cpmc))]),a("li",[t._v("生产日期："+t._s(t.symMsg.data))]),a("li",[t._v("企业电话："+t._s(t.symMsg.fzrtel))]),a("li",[t._v("溯源码："+t._s(t.symMsg.sym))])]),a("div",{ref:"qrcode",staticClass:"sym",attrs:{id:"qrcode"}})]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"print",rawName:"v-print",value:"#printArea",expression:"'#printArea'"}],attrs:{type:"primary"}},[t._v("打 印")])],1)])],1)},r=[],s=a("1da1"),i=(a("96cf"),a("d044")),o=a.n(i),c={data:function(){return{tableData:[],printStyle:"",printCpmc:"",printPch:"",cpInfoList:[],cpmcList:[],pchList:[],postMsg:{token:"",pch:"",cpmc:""},queryInfo:{query:"",page:1},symMsg:{cpmc:"",data:"",fzrtel:"",sym:""},tokenStr:"",isAddInfo:!0,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},printNum:1,printDialogVisible:!1,print2DialogVisible:!1,downloadButton:!1,configs:{value:"",imagePath:"/static/1560242161(1).png",filter:"color"},total:0}},created:function(){this.tokenStr=window.sessionStorage.getItem("token"),this.postMsg.token=window.sessionStorage.getItem("token"),this.getPrintData(),this.getTableData()},methods:{getTableData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("TraceabilityList",t.queryInfo);case 2:a=e.sent,n=a.data,console.log(n),t.tableData=n.data.result,t.total=n.data.total;case 7:case"end":return e.stop()}}),e)})))()},getPrintData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.queryInfo.token=t.tokenStr,e.next=3,t.$http.post("ProductionInfo",t.queryInfo);case 3:for(a=e.sent,n=a.data,console.log(n),t.cpInfoList=n.data.result,r=0;r<t.cpInfoList.length;r++)-1==t.cpmcList.indexOf(t.cpInfoList[r].cpmc)&&t.cpmcList.push(t.cpInfoList[r].cpmc);case 8:case"end":return e.stop()}}),e)})))()},getPch:function(){this.pchList=[];for(var t=0;t<this.cpInfoList.length;t++)this.printCpmc==this.cpInfoList[t].cpmc&&this.pchList.push(this.cpInfoList[t].pch)},handleCurrentChange:function(t){this.queryInfo.page=t,this.getTableData()},createCode:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=e.printCpmc&&""!=e.printPch){t.next=3;break}return e.$message.error("请完善打印信息"),t.abrupt("return");case 3:return e.postMsg.pch=e.printPch,e.postMsg.cpmc=e.printCpmc,t.next=7,e.$http.post("TraceabilityPrint",e.postMsg);case 7:a=t.sent,n=a.data,console.log(n),e.symMsg.cpmc=n.data.cpmc,e.symMsg.data=n.data.date,e.symMsg.fzrtel=n.data.fzrtel,e.symMsg.sym=n.data.sym,e.codeUrl=e.baseUrl+"/#/sym/"+e.symMsg.sym,e.printDialogVisible=!0,e.$nextTick((function(){this.qrcode()}));case 17:case"end":return t.stop()}}),t)})))()},qrcode:function(){new o.a("qrcode",{width:135,height:135,text:this.codeUrl})}},watch:{isAddInfo:function(){console.log(this.isAddInfo)}}},l=c,p=(a("e8930"),a("2877")),u=Object(p["a"])(l,n,r,!1,null,"391ddc6e",null);e["default"]=u.exports},e8930:function(t,e,a){"use strict";a("ee50")},ee50:function(t,e,a){}}]);
//# sourceMappingURL=chunk-56f0b5fb.68748056.js.map