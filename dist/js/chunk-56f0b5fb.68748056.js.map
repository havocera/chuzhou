{"version":3,"sources":["webpack:///./src/components/enterprise/symInfo/symList.vue?178a","webpack:///src/components/enterprise/symInfo/symList.vue","webpack:///./src/components/enterprise/symInfo/symList.vue?75ba","webpack:///./src/components/enterprise/symInfo/symList.vue","webpack:///./src/components/enterprise/symInfo/symList.vue?f740"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","tableData","queryInfo","page","total","pageSize","on","handleCurrentChange","printDialogVisible","$event","staticClass","_v","_s","symMsg","cpmc","data","fzrtel","sym","ref","slot","directives","name","rawName","value","expression","staticRenderFns","token","pch","configs","imagePath","filter","newPage","getTableData","width","height","text","codeUrl","component"],"mappings":"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","file":"js/chunk-56f0b5fb.68748056.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\",\"position\":\"relative\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"50px\"},attrs:{\"data\":_vm.tableData,\"height\":\"550\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"cpmc\",\"label\":\"产品名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"chandi\",\"label\":\"产地\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"pch\",\"label\":\"批次号\"}}),_c('el-table-column',{attrs:{\"prop\":\"sym\",\"label\":\"溯源码\"}}),_c('el-table-column',{attrs:{\"prop\":\"smcs\",\"label\":\"扫码次数\"}}),_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"溯源码生成时间\",\"width\":\"180\"}})],1),_c('el-pagination',{staticStyle:{\"text-align\":\"center\",\"margin-top\":\"10px\"},attrs:{\"current-page\":_vm.queryInfo.page,\"background\":\"\",\"layout\":\"prev, pager, next, total\",\"total\":_vm.total,\"page-size\":_vm.queryInfo.pageSize},on:{\"current-change\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":\"二维码打印界面\",\"visible\":_vm.printDialogVisible,\"width\":\"30%\",\"destroy-on-close\":true,\"center\":\"\"},on:{\"update:visible\":function($event){_vm.printDialogVisible=$event}}},[_c('div',{staticClass:\"symContainer\",attrs:{\"id\":\"printArea\"}},[_c('div',{staticClass:\"sym-tit\"},[_vm._v(\" 物联网+区块链食品安全追溯系统 \")]),_c('ul',{staticClass:\"symInfo\"},[_c('li',[_vm._v(\"产品名称：\"+_vm._s(_vm.symMsg.cpmc))]),_c('li',[_vm._v(\"生产日期：\"+_vm._s(_vm.symMsg.data))]),_c('li',[_vm._v(\"企业电话：\"+_vm._s(_vm.symMsg.fzrtel))]),_c('li',[_vm._v(\"溯源码：\"+_vm._s(_vm.symMsg.sym))])]),_c('div',{ref:\"qrcode\",staticClass:\"sym\",attrs:{\"id\":\"qrcode\"}})]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{directives:[{name:\"print\",rawName:\"v-print\",value:('#printArea'),expression:\"'#printArea'\"}],attrs:{\"type\":\"primary\"}},[_vm._v(\"打 印\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div style=\"width:100%;height:100%;position:relative;\">\r\n\r\n<!-- table -->\r\n <el-table\r\n    :data=\"tableData\"\r\n    height=\"550\"\r\n    border\r\n    style=\"width:100%;margin-top:50px;\">\r\n     <el-table-column\r\n      prop=\"cpmc\"\r\n      label=\"产品名称\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"chandi\"\r\n      label=\"产地\"\r\n      width=\"180\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"pch\"\r\n      label=\"批次号\">\r\n    </el-table-column>\r\n       <el-table-column\r\n      prop=\"sym\"\r\n      label=\"溯源码\">\r\n    </el-table-column>\r\n       <el-table-column\r\n      prop=\"smcs\"\r\n      label=\"扫码次数\">\r\n    </el-table-column>\r\n      <el-table-column\r\n      prop=\"date\"\r\n      label=\"溯源码生成时间\"\r\n      width=\"180\">\r\n    </el-table-column>\r\n  </el-table>\r\n\r\n<el-pagination\r\n        style=\"text-align:center;margin-top:10px;\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.page\"\r\n        background\r\n        layout=\"prev, pager, next, total\"\r\n        :total=\"total\"\r\n        :page-size=\"queryInfo.pageSize\"\r\n      >\r\n      </el-pagination>\r\n\r\n<!-- 普通标签二维码dialog -->\r\n<el-dialog\r\n  title=\"二维码打印界面\"\r\n  :visible.sync=\"printDialogVisible\"\r\n  width=\"30%\"\r\n  :destroy-on-close = true\r\n  center>\r\n  <div class=\"symContainer\" id=\"printArea\">\r\n      <div class=\"sym-tit\">\r\n        物联网+区块链食品安全追溯系统\r\n      </div>\r\n      <ul class=\"symInfo\">\r\n        <li>产品名称：{{symMsg.cpmc}}</li>\r\n        <li>生产日期：{{symMsg.data}}</li>\r\n        <li>企业电话：{{symMsg.fzrtel}}</li>\r\n        <li>溯源码：{{symMsg.sym}}</li>\r\n      </ul>\r\n      <div class=\"sym\" id=\"qrcode\" ref=\"qrcode\"></div>\r\n  </div>\r\n  \r\n  <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button type=\"primary\"  v-print=\"'#printArea'\">打 印</el-button>\r\n  </span>\r\n</el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport QRCode from \"qrcodejs2\";\r\nexport default {\r\n    data(){\r\n      return{\r\n         tableData: [],\r\n        printStyle:'',\r\n        printCpmc:'',\r\n        printPch:'',\r\n        cpInfoList:[],\r\n        cpmcList:[],\r\n        pchList:[],\r\n        postMsg: {\r\n        token: \"\",\r\n        pch:'',\r\n        cpmc:''\r\n          },\r\n        queryInfo: {\r\n          query:'',\r\n           page: 1,\r\n          },\r\n          symMsg:{\r\n            cpmc:'',\r\n            data:'',\r\n            fzrtel:'',\r\n            sym:''\r\n          },\r\n        tokenStr:'',\r\n        isAddInfo:true,\r\n        form: {\r\n          name: '',\r\n          region: '',\r\n          date1: '',\r\n          date2: '',\r\n          delivery: false,\r\n          type: [],\r\n          resource: '',\r\n          desc: ''\r\n        },\r\n        printNum:1,\r\n        printDialogVisible:false,\r\n        print2DialogVisible:false,\r\n        downloadButton: false,\r\n      configs: {\r\n        value: \"\",\r\n        imagePath: \"/static/1560242161(1).png\",\r\n        filter: \"color\"\r\n        },\r\n        total:0\r\n      }\r\n    },\r\n    created(){\r\n        this.tokenStr = window.sessionStorage.getItem(\"token\")\r\n        this.postMsg.token = window.sessionStorage.getItem(\"token\")\r\n        this.getPrintData();\r\n        this.getTableData();\r\n    },\r\n    methods:{\r\n     async getTableData(){\r\n            const {data:res} = await this.$http.post('TraceabilityList',this.queryInfo)\r\n            console.log(res)\r\n            this.tableData = res.data.result;\r\n            this.total =res.data.total;\r\n      },\r\n       async getPrintData(){\r\n          this.queryInfo.token = this.tokenStr;\r\n           const {data:res} = await this.$http.post(\r\n              \"ProductionInfo\",\r\n              this.queryInfo\r\n              );\r\n              console.log(res)\r\n              this.cpInfoList = res.data.result\r\n              // 对产品名称进行去重操作\r\n              for(let i=0;i<this.cpInfoList.length;i++){\r\n                  if(this.cpmcList.indexOf(this.cpInfoList[i].cpmc) == -1){\r\n                    this.cpmcList.push(this.cpInfoList[i].cpmc)\r\n                  }\r\n              }\r\n        },\r\n        getPch(){\r\n          // 遍历批次号，更新对应产品的批次号数据\r\n              this.pchList = [];\r\n              for(let i=0;i<this.cpInfoList.length;i++){\r\n                  if(this.printCpmc == this.cpInfoList[i].cpmc){\r\n                    this.pchList.push(this.cpInfoList[i].pch)\r\n                  }\r\n              }\r\n        },\r\n        // 分页功能--监听当前页码值 改变事件\r\n    handleCurrentChange(newPage) {\r\n      // console.log(\"当前页是\" + newPage);\r\n      this.queryInfo.page = newPage\r\n      this.getTableData();\r\n    },\r\n        async createCode(isAddInfo){\r\n          if(this.printCpmc =='' || this.printPch ==''){\r\n              this.$message.error('请完善打印信息')\r\n              return;\r\n          }\r\n          this.postMsg.pch = this.printPch\r\n          this.postMsg.cpmc = this.printCpmc\r\n         const {data:res} = await this.$http.post(\r\n            'TraceabilityPrint',\r\n            this.postMsg\r\n          )\r\n          console.log(res)\r\n          this.symMsg.cpmc = res.data.cpmc\r\n          this.symMsg.data = res.data.date\r\n          this.symMsg.fzrtel = res.data.fzrtel\r\n          this.symMsg.sym = res.data.sym\r\n          this.codeUrl = this.baseUrl +'/#/sym/'+this.symMsg.sym\r\n          this.printDialogVisible = true\r\n          this.$nextTick(function() {\r\n                this.qrcode();\r\n                });\r\n          // if(this.isAddInfo){\r\n          //       this.printDialogVisible = true\r\n          //   this.$nextTick(function() {\r\n          //       this.qrcode();\r\n          //   });\r\n          // }else{\r\n          //   this.$nextTick(function(){\r\n          //       this.qrcode();\r\n          //   });\r\n          //  this.print2DialogVisible = true   \r\n          // }\r\n        },\r\n        qrcode() {//这里是调用的方法\r\n      let qrcode = new QRCode(\"qrcode\", {\r\n        width: 135, // 设置宽度\r\n        height: 135, // 设置高度\r\n        text: this.codeUrl\r\n      });\r\n        },\r\n    },\r\n    watch:{\r\n      'isAddInfo':function(){\r\n        console.log(this.isAddInfo)\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .printForm{\r\n    margin: 0 auto;\r\n    width:500px;\r\n  }\r\n  .select-width{\r\n    width: 400px;\r\n  }\r\n  .tit{\r\n    height: 50px;\r\n    line-height: 50px;\r\n    color:#0b73cc;\r\n    text-align: center;\r\n  }\r\n  .large{\r\n    width: 100%;\r\n  }\r\n  .symContainer{\r\n    width: 320px;\r\n    height: 210px;\r\n    border:3px solid #000;\r\n    margin:0 auto;\r\n    position: relative;\r\n  }\r\n  .symContainer2{\r\n     width: 210px;\r\n    height: 210px;\r\n    border:3px solid #000;\r\n    margin:0 auto;\r\n    position: relative;\r\n  }\r\n  .symContainer2 .sym{\r\n    position: absolute;\r\n    top:55px;\r\n    right:37px;\r\n  }\r\n  .sym-tit{\r\n    text-align: center;\r\n    font-size:20px;\r\n    color:#000;\r\n  }\r\n  .sym{\r\n    position: absolute;\r\n    top:46px;\r\n    right:5px;\r\n  }\r\n  .symInfo{\r\n    font-size:13px;\r\n    width: 180px;\r\n  }\r\n .symContainer ul li{\r\n    height: 35px;\r\n    padding:10px 0 0 5px;\r\n   }\r\n</style>\r\n\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./symList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./symList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./symList.vue?vue&type=template&id=391ddc6e&scoped=true&\"\nimport script from \"./symList.vue?vue&type=script&lang=js&\"\nexport * from \"./symList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./symList.vue?vue&type=style&index=0&id=391ddc6e&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"391ddc6e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./symList.vue?vue&type=style&index=0&id=391ddc6e&scoped=true&lang=less&\""],"sourceRoot":""}