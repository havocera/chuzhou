{"version":3,"sources":["webpack:///./src/components/enterprise/nszyInfo/iotInfo.vue?ddf8","webpack:///./src/components/enterprise/nszyInfo/iotInfo.vue?1cff","webpack:///src/components/enterprise/nszyInfo/iotInfo.vue","webpack:///./src/components/enterprise/nszyInfo/iotInfo.vue?4b9d","webpack:///./src/components/enterprise/nszyInfo/iotInfo.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","staticClass","staticStyle","tableData","total","queryInfo","pageSize","on","handleCurrentChange","addDialogVisible","$event","ref","rules","addFormInfo","model","value","callback","$$v","$set","expression","_l","item","key","cdbh","chandi","bh","cpmc","slot","addFormSubmit","staticRenderFns","token","query","page","selectchandi","selectProduct","newPage","getDataList","component"],"mappings":"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","file":"js/chunk-06c368b3.bdd74b45.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./iotInfo.vue?vue&type=style&index=0&id=e016ffd0&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"种植过程管理\")]),_c('el-breadcrumb-item',[_vm._v(\"生产环境数据\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"label\":\"编号\",\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"生产企业名称\",\"prop\":\"qymc\"}}),_c('el-table-column',{attrs:{\"label\":\"产地名称\",\"prop\":\"chandi\"}}),_c('el-table-column',{attrs:{\"label\":\"PH值\",\"prop\":\"ph\"}}),_c('el-table-column',{attrs:{\"label\":\"土壤温度\",\"prop\":\"wd\"}}),_c('el-table-column',{attrs:{\"label\":\"土壤湿度\",\"prop\":\"sd\"}}),_c('el-table-column',{attrs:{\"label\":\"更新日期\",\"prop\":\"create_date\"}})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next,total\",\"total\":_vm.total,\"page-size\":_vm.queryInfo.pageSize},on:{\"current-change\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":\"新增产品生产信息\",\"visible\":_vm.addDialogVisible,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"size\":\"medium\",\"rules\":_vm.rules,\"model\":_vm.addFormInfo,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"产地名称\",\"prop\":\"chandi\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择作业地块\"},model:{value:(_vm.addFormInfo.chandi),callback:function ($$v) {_vm.$set(_vm.addFormInfo, \"chandi\", $$v)},expression:\"addFormInfo.chandi\"}},_vm._l((_vm.selectchandi),function(item){return _c('el-option',{key:item.cdbh,attrs:{\"label\":item.chandi,\"value\":item.chandi}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"产品名称\",\"prop\":\"cpbh\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择产品\"},model:{value:(_vm.addFormInfo.cpbh),callback:function ($$v) {_vm.$set(_vm.addFormInfo, \"cpbh\", $$v)},expression:\"addFormInfo.cpbh\"}},_vm._l((_vm.selectProduct),function(item){return _c('el-option',{key:item.bh,attrs:{\"label\":item.cpmc,\"value\":item.bh}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"生产负责人\",\"prop\":\"scz\"}},[_c('el-input',{model:{value:(_vm.addFormInfo.scz),callback:function ($$v) {_vm.$set(_vm.addFormInfo, \"scz\", $$v)},expression:\"addFormInfo.scz\"}})],1),_c('el-form-item',{attrs:{\"label\":\"生产日期\",\"prop\":\"rq\"}},[_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.addFormInfo.rq),callback:function ($$v) {_vm.$set(_vm.addFormInfo, \"rq\", $$v)},expression:\"addFormInfo.rq\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addFormSubmit}},[_vm._v(\"确 定\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>种植过程管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>生产环境数据</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 卡片视图区 -->\r\n    <el-card class=\"box-card\">\r\n\r\n       <!-- 数据列表区域 -->\r\n      <el-table :data=\"tableData\" style=\"width: 100%\">\r\n        <el-table-column label=\"编号\" type=\"index\"></el-table-column>\r\n        <el-table-column label=\"生产企业名称\" prop=\"qymc\"></el-table-column>\r\n        <el-table-column label=\"产地名称\" prop=\"chandi\"></el-table-column>\r\n        <el-table-column label=\"PH值\" prop=\"ph\"></el-table-column>\r\n        <el-table-column label=\"土壤温度\" prop=\"wd\"></el-table-column>\r\n        <el-table-column label=\"土壤湿度\" prop=\"sd\"></el-table-column>\r\n        <el-table-column label=\"更新日期\" prop=\"create_date\"></el-table-column>\r\n        \r\n\r\n      </el-table>\r\n      <!-- 分页区域 -->\r\n      <el-pagination\r\n        background\r\n        layout=\"prev, pager, next,total\"\r\n        :total=\"total\"\r\n        :page-size=\"queryInfo.pageSize\"\r\n        @current-change =\"handleCurrentChange\"\r\n      >\r\n      </el-pagination>\r\n       <!-- 新增产品生产dialog -->\r\n      <el-dialog\r\n        title=\"新增产品生产信息\"\r\n        :visible.sync=\"addDialogVisible\"\r\n        width=\"40%\"\r\n      >\r\n        <!-- 表单区 -->\r\n        <el-form size=\"medium\" :rules=\"rules\"  ref=\"addFormRef\" :model=\"addFormInfo\" label-width=\"120px\">\r\n         \r\n          <!-- 下拉框 -->\r\n           <el-form-item label=\"产地名称\"  prop=\"chandi\">\r\n            <el-select v-model=\"addFormInfo.chandi\" placeholder=\"请选择作业地块\">\r\n              <el-option :label=\"item.chandi\" v-for=\"item in selectchandi\" :key=\"item.cdbh\" :value=\"item.chandi\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"产品名称\"  prop=\"cpbh\">\r\n            <el-select v-model=\"addFormInfo.cpbh\" placeholder=\"请选择产品\">\r\n              <el-option :label=\"item.cpmc\" v-for=\"item in selectProduct\" :key=\"item.bh\" :value=\"item.bh\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"生产负责人\"  prop=\"scz\">\r\n            <el-input v-model=\"addFormInfo.scz\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"生产日期\"  prop=\"rq\">\r\n            <el-date-picker\r\n              value-format=\"yyyy-MM-dd\"\r\n              format=\"yyyy-MM-dd\"\r\n              v-model=\"addFormInfo.rq\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n            >\r\n            </el-date-picker>\r\n          </el-form-item>\r\n         \r\n        </el-form>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addFormSubmit\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n      return{\r\n        tokenStr: \"\",\r\n      queryInfo: {\r\n        token: \"\",\r\n        query: \"\",\r\n        page: 1,\r\n        pageSize: 5\r\n      },\r\n      total: 0,\r\n      // 列表渲染数据\r\n      tableData: [],\r\n      addDialogVisible: false,\r\n      addFormInfo:{\r\n          token:'',\r\n          chandi:'',\r\n          cpbh:'',\r\n          cpmc:'',\r\n          scz:'',\r\n          rq:''\r\n        },\r\n      selectchandi:[],\r\n      selectProduct:[]\r\n      }\r\n    },\r\n    created(){\r\n         this.tokenStr = window.sessionStorage.getItem(\"token\");\r\n         this.getDataList();\r\n    },\r\n    methods:{\r\n        async getDataList() {\r\n      this.queryInfo.token = this.tokenStr;\r\n      const { data: res } = await this.$http.post(\r\n        \"IotList\",\r\n        this.queryInfo\r\n      );\r\n      this.tableData = res.data.result;\r\n      this.total = res.data.total;\r\n      console.log( res.data);\r\n      //  新增产地，下拉框数据\r\n    const {data:selectRes} =await this.$http.post('SelectPlace',{token:this.tokenStr})\r\n    this.selectchandi = selectRes.data;\r\n     //  产品名称，下拉框数据\r\n    const {data: selectProductRes} =await this.$http.post('SelectProduction',{token:this.tokenStr})\r\n    this. selectProduct =  selectProductRes.data;\r\n    // console.log(selectProductRes)\r\n    },\r\n     // 分页功能--监听当前页码值 改变事件\r\n    handleCurrentChange(newPage) {\r\n      // console.log(\"当前页是\" + newPage);\r\n      this.queryInfo.page = newPage\r\n      this.getDataList();\r\n    },\r\n   async addFormSubmit(){\r\n      this.addFormInfo.token = this.tokenStr;\r\n      const {data:res} = await this.$http.post('AddProductionInfo',this.addFormInfo);\r\n      console.log(res);\r\n      if(res.code == 0){\r\n         this.$message({\r\n          message: '添加产品生产信息成功！',\r\n          type: 'success'\r\n        });\r\n         this.getDataList();\r\n         this.addDialogVisible= false;\r\n      }else{\r\n         this.$message({\r\n          message: '添加产品生产信息失败！',\r\n          type: 'error'\r\n        });\r\n      }\r\n     \r\n    },\r\n      async delInfo(id){\r\n        const confirmRes =await this.$confirm('此操作将永久删除该条信息, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).catch(err=>err)\r\n        if(confirmRes !='confirm'){\r\n          return this.$message.info('取消删除')\r\n        }\r\n        const res = await this.$http.post('DelProductionInfo',{\r\n            token:this.tokenStr,bh:id\r\n          })\r\n        if(res.status !== 200){\r\n          return this.$message.error('删除失败')\r\n        }\r\n        this.$message.success('删除成功')\r\n        this.getDataList();\r\n        console.log(res)\r\n    }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-breadcrumb {\r\n  height: 30px;\r\n}\r\n.el-pagination {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./iotInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./iotInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./iotInfo.vue?vue&type=template&id=e016ffd0&scoped=true&\"\nimport script from \"./iotInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./iotInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./iotInfo.vue?vue&type=style&index=0&id=e016ffd0&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e016ffd0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}