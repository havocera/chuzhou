{"remainingRequest":"E:\\code\\chuzhouxueyuan\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\chuzhouxueyuan\\src\\components\\enterprise\\jggc\\jggc.vue?vue&type=style&index=0&id=161cfa9e&scoped=true&lang=less&","dependencies":[{"path":"E:\\code\\chuzhouxueyuan\\src\\components\\enterprise\\jggc\\jggc.vue","mtime":1641390988415},{"path":"E:\\code\\chuzhouxueyuan\\node_modules\\css-loader\\dist\\cjs.js","mtime":1670835183126},{"path":"E:\\code\\chuzhouxueyuan\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1670835191289},{"path":"E:\\code\\chuzhouxueyuan\\node_modules\\postcss-loader\\src\\index.js","mtime":1670835186768},{"path":"E:\\code\\chuzhouxueyuan\\node_modules\\less-loader\\dist\\cjs.js","mtime":1670835184857},{"path":"E:\\code\\chuzhouxueyuan\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670835181809},{"path":"E:\\code\\chuzhouxueyuan\\node_modules\\vue-loader\\lib\\index.js","mtime":1670835187845}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmVsLWJyZWFkY3J1bWIgew0KICBoZWlnaHQ6IDMwcHg7DQp9DQouZWwtcGFnaW5hdGlvbiB7DQogIG1hcmdpbi10b3A6IDEwcHg7DQp9DQouZWwtdXBsb2FkLWRyYWdnZXJ7DQogIG1hcmdpbi1sZWZ0OiAyMDBweDsNCn0NCg=="},{"version":3,"sources":["jggc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"jggc.vue","sourceRoot":"src/components/enterprise/jggc","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>加工过程管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>加工过程</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 卡片视图区 -->\r\n    <el-card class=\"box-card\">\r\n      <!-- 搜索与添加区域 -->\r\n      <el-row :gutter=\"10\">\r\n        <el-col :span=\"6\">\r\n          <el-input @clear=\"getproductList\"  clearable placeholder=\"请输入内容\" class=\"input-with-select\" v-model=\"queryInfo.query\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"queryMsg\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"2\">\r\n          <el-button type=\"primary\" @click=\"clickAdd()\">添加加工信息</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 产品列表区域 -->\r\n      <el-table\r\n       :data=\"productList\" style=\"width: 100%\">\r\n        <el-table-column label=\"编号\" type=\"index\"></el-table-column>\r\n        <el-table-column prop=\"qymc\" label=\"生产企业名称\" width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"cpmc\" label=\"产品名称\" width=\"140\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"pch\" label=\"加工批次号\" width=\"140\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"picture\" label=\"加工图片\" width=\"140\">\r\n          <template slot-scope=\"scope\">\r\n            <img :src=\"scope.row.picture\" alt=\"暂无图片\" width=\"100px\" height=\"100px\" />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"process_name\" label=\"加工过程\" width=\"180\"> </el-table-column>\r\n        <el-table-column prop=\"process_way\" label=\"加工方式\" width=\"120\"> </el-table-column>\r\n        <el-table-column prop=\"process_time\" label=\"加工时间\" width=\"120\"> </el-table-column>\r\n        <el-table-column prop=\"fzr\" label=\"操作人\" width=\"180\"> </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"180\">\r\n          <!-- 插槽自定义样式 -->\r\n          <template slot-scope=\"scope\">\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"编辑\"\r\n              placement=\"top-start\"\r\n            >\r\n              <el-button type=\"primary\" @click=\"showEditDialog(scope.row.id)\" icon=\"el-icon-edit\"></el-button>\r\n            </el-tooltip>\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"删除\"\r\n              placement=\"top-end\"\r\n            >\r\n              <el-button type=\"warning\" icon=\"el-icon-delete\" @click=\"removeById(scope.row.id)\"></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页区域 -->\r\n      <el-pagination\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.current_page\"\r\n        background\r\n        layout=\"prev, pager, next, total\"\r\n        :total=\"total\"\r\n        :page-size=\"queryInfo.pageSize\"\r\n      >\r\n      </el-pagination>\r\n    </el-card>\r\n    <!-- 新增产品dialog弹窗开始 -->\r\n    <el-dialog\r\n  title=\"添加加工过程信息\"\r\n  :visible.sync=\"addDialogVisible\"\r\n  width=\"40%\"\r\n  @close=\"addFormClosed\"\r\n >\r\n  <!-- 表单内容区 -->\r\n  <el-form :rules=\"FormRules\" enctype=\"multipart/form-data\" ref=\"addJggcInfo\" :model=\"addJggcInfo\" label-width=\"80px\">\r\n\r\n <el-form-item label=\"产品名称\" prop=\"cpmc\">\r\n    <el-select @change=\"getAddPch\" class=\"select-width\" v-model=\"addJggcInfo.cpmc\" placeholder=\"请选择产品名称\">\r\n      <el-option :label=\"item\" v-for=\"item in cpmcList\" :value=\"item\" :key=\"item.index\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n    <el-form-item label=\"加工批次\" prop=\"pch\">\r\n    <el-select class=\"select-width\" v-model=\"addJggcInfo.pch\" placeholder=\"请选择产品批次号\">\r\n      <el-option v-for=\"item in pchList\" :value=\"item\" :label=\"item\" :key=\"item.index\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n  <el-form-item label=\"加工过程\" prop=\"process_name\">\r\n      <el-autocomplete\r\n      class=\"inline-input\"\r\n      v-model=\"addJggcInfo.process_name\"\r\n      :fetch-suggestions=\"querySearch\"\r\n      placeholder=\"请输入加工过程\"\r\n      @select=\"handleSelect\"\r\n    ></el-autocomplete>\r\n  </el-form-item>\r\n  <el-form-item  label=\"图片名称\" prop=\"process_pic\">\r\n    <el-input disabled v-model=\"addJggcInfo.process_pic\"></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"加工过程图片上传\">\r\n    <!-- 图片上传组件 -->\r\n  <el-upload\r\n  ref=\"addUpload\"\r\n  name=\"image\"\r\n  class=\"upload-demo\"\r\n  :action=\"uploadURL\"\r\n  :on-success=\"successEvent\"\r\n  :on-preview=\"handlePreview\"\r\n  :on-remove=\"handleRemove\"\r\n  list-type=\"picture\">\r\n  <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n  <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png格式的图片，且图片大小不能超过1MB</div>\r\n</el-upload>\r\n  </el-form-item>\r\n  \r\n <el-form-item label=\"加工方式\" prop=\"process_way\">\r\n     <el-select v-model=\"addJggcInfo.process_way\" placeholder=\"请选择\">\r\n     <el-option\r\n      v-for=\"item in jgfsOptions\"\r\n      :key=\"item.value\"\r\n      :label=\"item.label\"\r\n      :value=\"item.value\">\r\n    </el-option>\r\n  </el-select>\r\n  </el-form-item>\r\n     <el-form-item label=\"作业日期\"  prop=\"process_time\">\r\n            <el-date-picker\r\n              value-format=\"yyyy-MM-dd\"\r\n              format=\"yyyy-MM-dd\"\r\n              v-model=\"addJggcInfo.process_time\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n              \r\n            >\r\n            </el-date-picker>\r\n          </el-form-item>\r\n  <el-form-item label=\"负责人\" prop=\"fzr\">\r\n    <el-input  v-model=\"addJggcInfo.fzr\"></el-input>\r\n  </el-form-item>\r\n  </el-form>\r\n\r\n  <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n    <el-button type=\"primary\" @click=\"addSubmit\">确 定</el-button>\r\n  </span>\r\n</el-dialog>\r\n <!-- 产品dialog弹窗结束 -->\r\n <!-- 新编辑产品 -->\r\n  <el-dialog\r\n  title=\"编辑加工过程信息\"\r\n  :visible.sync=\"editDialogVisible\"\r\n  width=\"40%\"\r\n  @close=\"addFormClosed\"\r\n >\r\n  <!-- 表单内容区 -->\r\n  <el-form :rules=\"FormRules\" enctype=\"multipart/form-data\" ref=\"editFormRef\" :model=\"editJggcInfo\" label-width=\"80px\">\r\n\r\n <el-form-item label=\"产品名称\">\r\n   <!-- 后端不给传cpmc字段，这里用editCpmc过渡一下，且不影响批次号选择 -->\r\n    <el-select @change=\"getPch\" class=\"select-width\" v-model=\"editCpmc\" placeholder=\"请选择产品名称\">\r\n      <el-option :label=\"item\" v-for=\"item in cpmcList\" :value=\"item\" :key=\"item.index\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n    <el-form-item label=\"加工批次\">\r\n    <el-select class=\"select-width\" v-model=\"editJggcInfo.pch\" placeholder=\"请选择产品批次号\">\r\n      <el-option v-for=\"item in pchList\" :value=\"item\" :label=\"item\" :key=\"item.index\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n  <el-form-item label=\"加工过程\" prop=\"cpmc\">\r\n      <el-autocomplete\r\n      class=\"inline-input\"\r\n      v-model=\"editJggcInfo.process_name\"\r\n      :fetch-suggestions=\"querySearch\"\r\n      placeholder=\"请输入加工过程\"\r\n      @select=\"handleSelect\"\r\n    ></el-autocomplete>\r\n  </el-form-item>\r\n  <el-form-item  label=\"图片名称\" prop=\"picname\">\r\n    <el-input disabled v-model=\"editJggcInfo.process_pic\"></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"加工过程图片上传\">\r\n    <!-- 图片上传组件 -->\r\n  <el-upload\r\n  ref=\"upload\"\r\n  name=\"image\"\r\n  class=\"upload-demo\"\r\n  :action=\"uploadURL\"\r\n  :on-success=\"successEvent\"\r\n  :on-preview=\"handlePreview\"\r\n  :on-remove=\"handleRemove\"\r\n  list-type=\"picture\">\r\n  <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n  <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png格式的图片，且图片大小不能超过1MB</div>\r\n</el-upload>\r\n  </el-form-item>\r\n  <el-form-item label=\"加工方式\" prop=\"cpgg\">\r\n     <el-select v-model=\"editJggcInfo.process_way\" placeholder=\"请选择\">\r\n     <el-option\r\n      v-for=\"item in jgfsOptions\"\r\n      :key=\"item.value\"\r\n      :label=\"item.label\"\r\n      :value=\"item.value\">\r\n    </el-option>\r\n  </el-select>\r\n  </el-form-item>\r\n     <el-form-item label=\"作业日期\"  prop=\"rq\">\r\n            <el-date-picker\r\n              value-format=\"yyyy-MM-dd\"\r\n              format=\"yyyy-MM-dd\"\r\n              v-model=\"editJggcInfo.process_time\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n              \r\n            >\r\n            </el-date-picker>\r\n          </el-form-item>\r\n  <el-form-item label=\"负责人\" prop=\"bzq\">\r\n    <el-input  v-model=\"editJggcInfo.fzr\"></el-input>\r\n  </el-form-item>\r\n  </el-form>\r\n\r\n  <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n    <el-button type=\"primary\" @click=\"editSubmit\">确 定</el-button>\r\n  </span>\r\n</el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 获取产品列表的参数对象\r\n      queryInfo: {\r\n        query: \"\",\r\n        // 每页显示多少条\r\n        pageSize:5,\r\n        // 当所处页数\r\n        current_page: 1,\r\n        page:1\r\n      },\r\n      total:0,\r\n      productList:[],\r\n      addDialogVisible:false,\r\n      addJggcInfo:{\r\n          cpmc:'',\r\n          pch:'',\r\n          process_name:'',\r\n          process_way:'',\r\n          fzr:'',\r\n          process_time:'',\r\n          process_pic:''\r\n      },\r\n      jgfsOptions:[\r\n          {\r\n          value: '手动',\r\n          label: '手动'\r\n        }, {\r\n          value: '机械',\r\n          label: '机械'\r\n        }\r\n      ],\r\n      cpInfoList:[],\r\n      cpmcList:[],\r\n      pchList:[],\r\n      printCpmc:'',\r\n      processName:[\r\n         { \"value\": \"杀青\", \"address\": \"长宁区新渔路144号\" },\r\n          { \"value\": \"揉捻\", \"address\": \"上海市长宁区淞虹路661号\" },\r\n          { \"value\": \"干燥\", \"address\": \"上海市普陀区真北路988号创邑金沙谷6号楼113\" },\r\n          { \"value\": \"制型\", \"address\": \"天山西路438号\" },\r\n      ],\r\n        value: '',\r\n      editJggcInfo:{\r\n          id:'',\r\n          pch:'',\r\n          process_name:'',\r\n          process_way:'',\r\n          fzr:'',\r\n          process_time:'',\r\n          process_pic:''\r\n      },\r\n      editCpmc:'',\r\n      editProductForm:{},\r\n      editProductFormPicname:'',\r\n      editDialogVisible:false,\r\n      tokenStr:window.sessionStorage.getItem('token'),\r\n      uploadURL:'',\r\n      headerObj:{\r\n        token:window.sessionStorage.getItem('token')\r\n      },\r\n      // 表单验证规则\r\n      FormRules:{\r\n        editCpmc:[\r\n          { required: true, message: '请输入产品名称', trigger: 'blur' }\r\n        ],\r\n        // bzq:[\r\n        //   { required: true, message: '请输入产品保质期,单位天', trigger: 'blur' },\r\n        //   {type:'number',message: '请填写数字', trigger: 'blur'}\r\n        // ]\r\n      }\r\n        \r\n    };\r\n  },\r\n  created() {\r\n    this.getproductList();\r\n    this.setUploadURL();\r\n  },\r\n  methods: {\r\n    async getproductList() {\r\n      const tokenStr = window.sessionStorage.getItem(\"token\");\r\n      // console.log(tokenStr)\r\n      const {\r\n        data: res\r\n      } = await this.$http.post('ProcessList', \r\n       {page:this.queryInfo.current_page,query:this.queryInfo.query}\r\n      );\r\n      if (res.code !== 0) return this.$message.error(\"获取产品列表数据失败！\");\r\n      this.productList = res.data.result;  \r\n      this.total = res.data.total; \r\n      // console.log(this.productList);\r\n      console.log(res)\r\n    },\r\n    // 分页功能--监听当前页码值 改变事件\r\n    handleCurrentChange(newPage) {\r\n      // console.log(\"当前页是\" + newPage);\r\n      this.queryInfo.current_page = newPage\r\n      this.getproductList();\r\n    },\r\n    // 查询按钮事件\r\n    queryMsg(){\r\n        this.getproductList();\r\n    },\r\n    clickAdd(){\r\n          console.log(123)\r\n          this.addDialogVisible=true\r\n          this.getPrintData()\r\n    },\r\n    // 点击新增，弹出框中获取产品名称和批次号\r\n    async getPrintData(){\r\n           const {data:res} = await this.$http.post(\r\n              \"ProductionInfo\",\r\n              this.queryInfo\r\n              );\r\n              console.log(res)\r\n              this.cpInfoList = res.data.result\r\n              // 对产品名称进行去重操作\r\n              for(let i=0;i<this.cpInfoList.length;i++){\r\n                  if(this.cpmcList.indexOf(this.cpInfoList[i].cpmc) == -1){\r\n                    this.cpmcList.push(this.cpInfoList[i].cpmc)\r\n                  }\r\n              }\r\n              console.log(this.cpInfoList)\r\n        },\r\n        getPch(){\r\n          // 遍历批次号，更新对应产品的批次号数据\r\n              this.pchList = [];\r\n              for(let i=0;i<this.cpInfoList.length;i++){\r\n                  // 获取不到批次号的话。this.editJggcInfo.cpmc要更改\r\n                  if(this.editCpmc == this.cpInfoList[i].cpmc){\r\n                    this.pchList.push(this.cpInfoList[i].pch)\r\n                  }\r\n              }\r\n        },\r\n          getAddPch(){\r\n          // 遍历批次号，更新对应产品的批次号数据\r\n              this.pchList = [];\r\n              for(let i=0;i<this.cpInfoList.length;i++){\r\n                  // 获取不到批次号的话。this.editJggcInfo.cpmc要更改\r\n                  if(this.addJggcInfo.cpmc == this.cpInfoList[i].cpmc){\r\n                    this.pchList.push(this.cpInfoList[i].pch)\r\n                  }\r\n              }\r\n        },\r\n    // 关闭dialog弹窗的回调函数\r\n    addFormClosed(){\r\n      // 在关闭dialog时重置表单\r\n      console.log(this.$refs)\r\n      this.$refs.addFormRef.resetFields();\r\n      this.$refs.upload.clearFiles();\r\n    },\r\n    // 编辑按钮点击事件\r\n    async showEditDialog(id){\r\n      console.log(id)\r\n     const {data:res} = await this.$http.post('EditProcessInfo',{\r\n        id:id\r\n      })\r\n      console.log(res.data);\r\n      this.editJggcInfo.id = id;\r\n      this.editJggcInfo.pch = res.data.pch;\r\n      this.editJggcInfo.process_name = res.data.process_name;\r\n      this.editJggcInfo.process_way = res.data.process_way;\r\n      this.editJggcInfo.process_time =res.data.process_time;\r\n      this.editJggcInfo.fzr = res.data.fzr;\r\n      this.editDialogVisible = true;\r\n       this.getPrintData()\r\n    },\r\n    // 提交编辑弹框修改\r\n    async editSubmit(){\r\n      this.editDialogVisible = false;\r\n       const{data:res} = await this.$http.post('DoEditProcessInfo',this.editJggcInfo)\r\n      this.getproductList();\r\n      if(res.code == 1){\r\n         this.$message.success('产品信息编辑成功')\r\n      this.getproductList();\r\n    }else{ \r\n      this.$message.error('产品信息编辑失败')\r\n    }\r\n     \r\n     \r\n      // console.log(res)\r\n    },\r\n    // 通过id删除产品信息\r\n      async removeById(id){\r\n      // console.log(id)\r\n      const res = await this.$confirm('此操作将永久删除该条信息, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).catch(\r\n          err=>err\r\n        );\r\n\r\n      if(res != 'confirm'){\r\n        return this.$message.info('取消了删除操作')\r\n      }\r\n      // console.log(tokenStr)\r\n     const {data:removeRes} =await this.$http.post('DelProcessInfo',{id:id});\r\n      //console.log(removeRes);\r\n      if(removeRes.code == 0 ){\r\n        this.$message.success('删除成功')\r\n        this.getproductList();\r\n      }else{\r\n        this.$message.error('删除失败')\r\n      }\r\n      \r\n    },\r\n    // 新增产品提交事件        \r\n   async addSubmit(){\r\n       const {data:res} =await this.$http.post('AddProcessInfo',this.addJggcInfo)\r\n        console.log(res)\r\n        if(res.code !==0){return this.$message.error('添加产品失败')}\r\n        this.$refs.addJggcInfo.resetFields();\r\n        this.$refs.addUpload.clearFiles();\r\n        this.addDialogVisible=false;\r\n        this.$message.success('产品添加成功')\r\n        this.getproductList();\r\n    },\r\n    // 产品添加图片预览\r\n    handlePreview(){\r\n\r\n    },\r\n    // 产品添加移除图片\r\n    handleRemove(){\r\n\r\n    },\r\n    successEvent(response, file, fileList){\r\n        this.addJggcInfo.process_pic = response.data.saveName;\r\n        this.editJggcInfo.process_pic = response.data.saveName;\r\n        // console.log(response,file.name)\r\n    },\r\n    // 动态设置图片上传路径\r\n    setUploadURL(){\r\n        this.tokenStr = window.sessionStorage.getItem('token');\r\n        this.uploadURL = 'http://ahteaapi.wtycms.cn/Processupload?token=' + this.tokenStr;\r\n        console.log(this.uploadURL)\r\n    },\r\n  // 带输入建议的输入框\r\n     querySearch(queryString, cb) {\r\n        var processName = this.processName;\r\n        var results = queryString ? processName.filter(this.createFilter(queryString)) : processName;\r\n        // 调用 callback 返回建议列表的数据\r\n        cb(results);\r\n      },\r\n      createFilter(queryString) {\r\n        return (processName) => {\r\n          return (processName.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n        };\r\n      },\r\n      handleSelect(item) {\r\n        console.log(item);\r\n      }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-breadcrumb {\r\n  height: 30px;\r\n}\r\n.el-pagination {\r\n  margin-top: 10px;\r\n}\r\n.el-upload-dragger{\r\n  margin-left: 200px;\r\n}\r\n</style>\r\n"]}]}